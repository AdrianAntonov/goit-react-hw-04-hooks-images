(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{25:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),o=c(6),r=c.n(o),i=c(4),s=(c(25),c(1));var l=function(e){var t=e.onSubmit,c=Object(a.useState)(""),n=Object(i.a)(c,2),o=n[0],r=n[1];return Object(s.jsx)("header",{className:"Searchbar",children:Object(s.jsxs)("form",{className:"SearchForm",onSubmit:function(e){""!==o.trim()?(e.preventDefault(),t(o),r("")):alert("Wrong input!")},children:[Object(s.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(s.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(s.jsx)("input",{className:"SearchForm-input",type:"text",value:o,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){r(e.target.value)}})]})})},u=c(10),j=c(19),d=c.n(j),b=c(20),m=c.n(b);var h=function(e){var t=e.data;return Object(s.jsx)("button",{className:"Button",onClick:t,children:"Load More"})},O=document.querySelector("#modal-root");var g=function(e){var t=e.onClose,c=e.children,n=function(e){"Escape"===e.code&&t()};return Object(a.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}})),Object(o.createPortal)(Object(s.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(s.jsx)("div",{className:"Modal",children:c})}),O)};var f=function(e){var t=e.id,c=e.picture,n=e.modalPicture,o=Object(a.useState)(!1),r=Object(i.a)(o,2),l=r[0],u=r[1],j=function(){u(!l)},d=function(e){t===+e.target.id&&j()};return Object(s.jsxs)("li",{className:"ImageGalleryItem",children:[l&&Object(s.jsx)(g,{onClose:j,children:Object(s.jsx)("img",{onClick:d,id:t,src:n,alt:t,className:"ImageGalleryItem-image"})}),Object(s.jsx)("img",{onClick:d,id:t,src:c,alt:t,className:"ImageGalleryItem-image"})]},t)};var p=function(e){var t=e.searchValue;console.log("ImageGalery");var c=Object(a.useState)([]),n=Object(i.a)(c,2),o=n[0],r=n[1],l=Object(a.useState)(1),j=Object(i.a)(l,2),b=j[0],O=j[1],g=Object(a.useState)(!1),p=Object(i.a)(g,2),v=p[0],x=p[1],S=Object(a.useState)(""),y=Object(i.a)(S,2),N=y[0],w=y[1],I=Object(a.useState)("idle"),k=Object(i.a)(I,2),C=k[0],E=k[1];console.log(v),Object(a.useEffect)((function(){""!==t&&(console.log("useEffect"),F(),E("pending"),x(!1))}),[t]);var F=function(){console.log("fetching"),d.a.get("https://pixabay.com/api/?q=".concat(t,"&page=").concat(b,"&key=").concat("23540624-9aec9adb1c30af208be906523","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){console.log("response"),0===e.data.hits.length&&alert("Not valid input! Try again!"),r((function(t){return[].concat(Object(u.a)(t),Object(u.a)(e.data.hits))})),O((function(e){return e+1})),E("resolved"),x(!0),v&&(console.log("scroll"),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}))})).catch((function(e){w(e),E("rejected")}))};return"idle"===C?null:"pending"===C?Object(s.jsx)(m.a,{type:"ThreeDots",color:"#00BFFF",height:100,width:100,timeout:3e3,className:"Loader"}):"rejected"===C?Object(s.jsx)("h2",{children:N}):"resolved"===C?Object(s.jsxs)("div",{children:[Object(s.jsx)("ul",{className:"ImageGallery",children:o.map((function(e){return Object(s.jsx)(f,{id:e.id,picture:e.webformatURL,modalPicture:e.largeImageURL},e.id)}))}),o.length>0&&Object(s.jsx)("div",{className:"DivButton",children:Object(s.jsx)(h,{data:function(){x(!0),F()}})})]}):void 0};var v=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(l,{onSubmit:function(e){n(e)}}),Object(s.jsx)(p,{searchValue:c})]})};r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(v,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.2b2c27c8.chunk.js.map