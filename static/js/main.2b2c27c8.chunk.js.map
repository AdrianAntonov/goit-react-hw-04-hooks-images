{"version":3,"sources":["components/Searchbar/Searchbar.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","onSubmit","useState","inputValue","setInputValue","className","e","trim","preventDefault","alert","type","value","autoComplete","autoFocus","placeholder","onChange","target","Button","data","onClick","modalRoot","document","querySelector","Modal","onClose","children","handleCloseModal","code","useEffect","window","addEventListener","removeEventListener","createPortal","currentTarget","ImageGalleryItem","id","picture","modalPicture","modal","setModal","toglleModal","handleModal","src","alt","ImageGallery","searchValue","console","log","images","setImages","page","setPage","scroll","setScroll","error","setError","status","setStatus","fetchingData","axios","get","then","response","hits","length","prevImages","prevPage","scrollTo","top","documentElement","scrollHeight","behavior","catch","color","height","width","timeout","map","item","webformatURL","largeImageURL","App","text","setText","arg","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2b2c27c8.chunk.js","sourcesContent":["import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles.css';\n\nfunction Searchbar({ onSubmit }) {\n  // state = {\n  //   inputValue: '',\n  // };\n\n  const [inputValue, setInputValue] = useState('');\n\n  const handleOnSubmit = e => {\n    if (inputValue.trim() === '') {\n      alert('Wrong input!');\n      return;\n    }\n    e.preventDefault();\n    onSubmit(inputValue);\n    setInputValue('');\n  };\n\n  const handleChange = e => {\n    // this.setState({ inputValue: e.target.value });\n    setInputValue(e.target.value);\n  };\n\n  return (\n    <header className=\"Searchbar\">\n      <form className=\"SearchForm\" onSubmit={handleOnSubmit}>\n        <button type=\"submit\" className=\"SearchForm-button\">\n          <span className=\"SearchForm-button-label\">Search</span>\n        </button>\n        <input\n          className=\"SearchForm-input\"\n          type=\"text\"\n          value={inputValue}\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          onChange={handleChange}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import PropTypes from 'prop-types';\n\nfunction Button({ data }) {\n  return (\n    <button className=\"Button\" onClick={data}>\n      Load More\n    </button>\n  );\n}\n\nButton.propTypes = {\n  data: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst modalRoot = document.querySelector('#modal-root');\nfunction Modal({ onClose, children }) {\n  const handleCloseModal = e => {\n    if (e.code === 'Escape') {\n      onClose();\n    }\n  };\n\n  const handleOverlayClose = e => {\n    if (e.currentTarget === e.target) {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleCloseModal);\n    return () => {\n      window.removeEventListener('keydown', handleCloseModal);\n    };\n  });\n\n  return createPortal(\n    <div className=\"Overlay\" onClick={handleOverlayClose}>\n      <div className=\"Modal\">{children}</div>\n    </div>,\n    modalRoot,\n  );\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.node,\n};\n\nexport default Modal;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from '../Modal';\n\nfunction ImageGalleryItem({ id, picture, modalPicture }) {\n  const [modal, setModal] = useState(false);\n\n  const toglleModal = () => {\n    setModal(!modal);\n  };\n\n  const handleModal = e => {\n    if (id === +e.target.id) {\n      toglleModal();\n    }\n  };\n\n  return (\n    <li className=\"ImageGalleryItem\" key={id}>\n      {modal && (\n        <Modal onClose={toglleModal}>\n          <img\n            onClick={handleModal}\n            id={id}\n            src={modalPicture}\n            alt={id}\n            className=\"ImageGalleryItem-image\"\n          />\n        </Modal>\n      )}\n      <img\n        onClick={handleModal}\n        id={id}\n        src={picture}\n        alt={id}\n        className=\"ImageGalleryItem-image\"\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.number.isRequired,\n  picture: PropTypes.node.isRequired,\n  modalPicture: PropTypes.node.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import { useState, useEffect } from 'react';\n// import { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport Loader from 'react-loader-spinner';\nimport Button from '../Button';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nconst KEY = '23540624-9aec9adb1c30af208be906523';\n\nfunction ImageGallery({ searchValue }) {\n  console.log('ImageGalery');\n  // state = {\n  //   images: [],\n  //   page: 1,\n  //   scroll: false,\n  //   error: '',\n  //   status: 'idle',\n  // };\n\n  const [images, setImages] = useState([]);\n  const [page, setPage] = useState(1);\n  const [scroll, setScroll] = useState(false);\n  const [error, setError] = useState('');\n  const [status, setStatus] = useState('idle');\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (prevProps.searchValue !== this.props.searchValue) {\n  //     this.setState({ status: 'pending', images: [], scroll: false });\n\n  //     this.fetchingData();\n  //   }\n  // }\n  // useEffect(() => {\n  //   console.log('effect searchValue');\n  //   setStatus('pending');\n  //   fetchingData();\n  // }, [searchValue]);\n\n  console.log(scroll);\n\n  useEffect(() => {\n    if (searchValue === '') {\n      return;\n    }\n    console.log('useEffect');\n    fetchingData();\n    setStatus('pending');\n    // setImages([]);\n    setScroll(false);\n  }, [searchValue]);\n\n  const handleScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  const handleButton = () => {\n    setScroll(true);\n    fetchingData();\n    // console.log('button click');\n  };\n\n  const fetchingData = () => {\n    console.log('fetching');\n    axios\n      .get(\n        `https://pixabay.com/api/?q=${searchValue}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n      )\n      .then(response => {\n        console.log('response');\n        if (response.data.hits.length === 0) {\n          // toast('Not valid input! Try again!');\n          alert('Not valid input! Try again!');\n        }\n\n        setImages(prevImages => [...prevImages, ...response.data.hits]);\n        setPage(prevPage => prevPage + 1);\n        setStatus('resolved');\n        setScroll(true);\n\n        if (scroll) {\n          console.log('scroll');\n          handleScroll();\n        }\n      })\n      .catch(error => {\n        setError(error);\n        setStatus('rejected');\n      });\n  };\n\n  if (status === 'idle') {\n    return null;\n  }\n  if (status === 'pending') {\n    return (\n      <Loader\n        type=\"ThreeDots\"\n        color=\"#00BFFF\"\n        height={100}\n        width={100}\n        timeout={3000}\n        className=\"Loader\"\n      />\n    );\n  }\n\n  if (status === 'rejected') {\n    return <h2>{error}</h2>;\n  }\n\n  if (status === 'resolved') {\n    return (\n      <div>\n        <ul className=\"ImageGallery\">\n          {/* <!-- Набор <li> с изображениями --> */}\n          {images.map(item => (\n            <ImageGalleryItem\n              key={item.id}\n              id={item.id}\n              picture={item.webformatURL}\n              modalPicture={item.largeImageURL}\n            />\n          ))}\n        </ul>\n\n        {images.length > 0 && (\n          <div className=\"DivButton\">\n            <Button data={handleButton} />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  searchValue: PropTypes.string.isRequired,\n};\n\nexport default ImageGallery;\n","// import { ToastContainer } from 'react-toastify';\nimport { useState } from 'react';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nfunction App() {\n  const [text, setText] = useState('');\n\n  const handleSearchbarInput = arg => {\n    setText(arg);\n  };\n\n  return (\n    <div className=\"App\">\n      <Searchbar onSubmit={handleSearchbarInput} />\n      <ImageGallery searchValue={text} />\n      {/* <ToastContainer position=\"top-center\" autoClose={3000} /> */}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}